<!DOCTYPE html>
<html lang="cs" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KartiÄky</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="left">
      <div class="brand">KartiÄky</div>
      <div class="pill">
        <label class="sr-only" for="quizSelect">Vybrat test</label>
        <select id="quizSelect"></select>
      </div>
    </div>

    <nav class="nav">
      <a href="index.html">Test</a>
      <a href="admin.html">SprÃ¡va</a>
      <a class="active" href="flashcards.html">KartiÄky</a>
    </nav>

    <div class="right">
      <button id="themeBtn" class="btn ghost" type="button" title="SvÄ›tlÃ½ / tmavÃ½ reÅ¾im">ğŸŒ™/â˜€ï¸</button>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <div id="jsStatus" class="note" style="margin-bottom:12px; display:none;"></div>

      <div class="row between">
        <div class="muted" id="counter">0 / 0</div>
        <div class="row">
          <button id="shuffleBtn" class="btn" type="button">ZamÃ­chat</button>
          <button id="resetBtn" class="btn ghost" type="button">Reset</button>
        </div>
      </div>

      <div class="flip-wrap">
        <div id="flipCard" class="flip-card" tabindex="0" role="button" aria-label="OtoÄit kartiÄku">
          <div class="flip-inner">
            <div class="flip-face flip-front">
              <div class="fc-label">OTÃZKA</div>
              <div id="frontText" class="fc-text"></div>
              <div class="fc-hint">Klikni na kartu / Enter = otoÄit. Å ipky â† â†’ = pÅ™edchozÃ­/dalÅ¡Ã­.</div>
            </div>
            <div class="flip-face flip-back">
              <div class="fc-label">ODPOVÄšÄ</div>
              <div id="backText" class="fc-text"></div>
              <div class="fc-hint">TeÄ dej UmÃ­m / NeumÃ­m.</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row fc-actions">
        <button id="flipBtn" class="btn" type="button">OtoÄit</button>
        <button id="dontBtn" class="btn danger" type="button">NeumÃ­m</button>
        <button id="knowBtn" class="btn primary" type="button">UmÃ­m</button>
        <span class="badge" id="learnedBadge">0 umÃ­m</span>
      </div>

      <p class="hint">
        KartiÄky pouÅ¾Ã­vajÃ­ otÃ¡zky oznaÄenÃ© pro â€KartiÄkyâ€œ nebo â€ObojÃ­â€œ ve SprÃ¡vÄ›.
      </p>
    </section>
  </main>

  <script defer src="flashcards.js?v=5"></script>

  <script>
    // Fallback: pokud se flashcards.js nespustÃ­ nebo nenaplnÃ­ select, doplnÃ­me ho z localStorage.
    window.__FLASHCARDS_LOADED__ = false;
    document.addEventListener("DOMContentLoaded", function(){
      setTimeout(function(){
        const sel = document.getElementById("quizSelect");
        if (!sel) return;
        if (sel.options.length > 0) return;

        try{
          const raw = localStorage.getItem("kvizik_v2");
          const data = raw ? JSON.parse(raw) : null;
          const tests = data && data.tests ? Object.values(data.tests) : [];
          if (!tests.length){
            const id = String(Date.now());
            const s = { theme:"dark", activeTestId:id, tests:{ [id]:{ id, name:"MÅ¯j test", questions:[] } } };
            localStorage.setItem("kvizik_v2", JSON.stringify(s));
            tests.push(s.tests[id]);
          }
          sel.innerHTML = "";
          tests.forEach(t=>{
            const o=document.createElement("option");
            o.value=t.id; o.textContent=t.name;
            sel.appendChild(o);
          });
          sel.selectedIndex = 0;
          const box = document.getElementById("jsStatus");
          if (box){
            box.style.display = "block";
            box.innerHTML = "Pozn.: select byl prÃ¡zdnÃ½, doplnil jsem ho fallbackem (cache/JS). TeÄ uÅ¾ to pobÄ›Å¾Ã­.";
          }
        }catch(e){}
      }, 350);
    });
  </script>

</body>
</html>
